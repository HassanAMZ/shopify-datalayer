<script>
	// View item list
	dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
	dataLayer.push({
		event: "view_item_list",
		ecommerce: {
			item_list_name: {{ collection.title | json }},
			items: [{%- for product in collection.products -%}
				{
					item_id: {{ product.selected_or_first_available_variant.sku | json }},
					item_name: {{ product.title | json }},
					currency: {{ shop.currency | json }},
					index: {{ forloop.index | json }},
					item_brand: {{ product.vendor | json }},
					item_category: {{ product.type | json }},
					item_list_name: {{ collection.title | json }},
					item_variant: {{ product.selected_or_first_available_variant.title | json }},
					price: {{ product.selected_or_first_available_variant.price | json }} / 100,
					quantity: 1
				}{%- unless forloop.last -%},{%- endunless -%}
			{%- endfor -%}]
		}
	});
</script>
